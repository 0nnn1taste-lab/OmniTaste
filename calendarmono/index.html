<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Monotone Calendar Widget</title>

  <!-- 감성 폰트 (한글도 예쁘게): Nanum Myeongjo -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* 연한 그레이톤 + 살짝 베이지 */
      --bg: #EEEAE3;
      --card: rgba(255,255,255,0.55);
      --ink: #111111;
      --muted: rgba(17,17,17,0.55);
      --line: rgba(17,17,17,0.12);

      --today-bg: #111111;
      --today-ink: #FFFFFF;

      /* 위젯 사이즈 */
      --w: 250px;
      --h: 500px;

      --radius: 18px;
    }

    *{ box-sizing: border-box; }
    html, body{
      width: 100%;
      height: 100%;
      margin: 0;
      background: transparent;
      color: var(--ink);
      font-family: "Nanum Myeongjo", serif;
    }

    /* 노션 iframe에서 딱 예쁘게 보이도록 고정 사이즈 */
    .widget{
      width: var(--w);
      height: var(--h);
      background: var(--bg);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: 0 12px 30px rgba(0,0,0,0.08);
      position: relative;
    }

    .inner{
      height: 100%;
      padding: 16px 14px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .header{
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px 6px 0 6px;
    }

    .monthTitle{
      font-weight: 700;
      letter-spacing: 0.2px;
      font-size: 18px;
      line-height: 1.1;
    }

    .yearLine{
      margin-top: 4px;
      font-size: 12px;
      color: var(--muted);
      letter-spacing: 0.2px;
    }

    .nav{
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .btn{
      width: 28px;
      height: 28px;
      border-radius: 10px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,0.55);
      color: var(--ink);
      cursor: pointer;
      display: grid;
      place-items: center;
      user-select: none;
      transition: transform 120ms ease, background 120ms ease;
      font-size: 14px;
    }
    .btn:active{ transform: scale(0.97); }
    .btn:hover{ background: rgba(255,255,255,0.75); }

    .divider{
      height: 1px;
      background: var(--line);
      margin: 2px 6px 0 6px;
    }

    .dow{
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
      padding: 6px 6px 0 6px;
      font-size: 12px;
      letter-spacing: 0.8px;
      color: var(--muted);
    }

    .grid{
      flex: 1;
      padding: 6px;
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      grid-auto-rows: 44px; /* 세로로 길게, 터치감 있게 */
      gap: 6px;
      align-content: start;
    }

    .cell{
      border-radius: 14px;
      border: 1px solid transparent;
      background: rgba(255,255,255,0.35);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      color: var(--ink);
      position: relative;
      transition: background 150ms ease, border-color 150ms ease;
    }

    .cell.muted{
      color: rgba(17,17,17,0.35);
      background: rgba(255,255,255,0.25);
    }

    .cell:hover{
      border-color: var(--line);
      background: rgba(255,255,255,0.55);
    }

    /* 오늘 날짜 강조: 검정 배경 + 흰 글자 */
    .cell.today{
      background: var(--today-bg);
      color: var(--today-ink);
      border-color: rgba(17,17,17,0.55);
      box-shadow: 0 10px 18px rgba(0,0,0,0.18);
    }

    /* 하단 작은 문구(선택) */
    .footerNote{
      padding: 0 6px 6px 6px;
      font-size: 11px;
      color: rgba(17,17,17,0.45);
      letter-spacing: 0.2px;
    }

    /* 노션에서 배경 투명 쓰고 싶으면 여기만 투명으로 바꿔도 됨 */
    /* .widget{ background: transparent; border: none; box-shadow:none; } */
  </style>
</head>

<body>
  <div class="widget" role="application" aria-label="Calendar widget">
    <div class="inner">
      <div class="header">
        <div>
          <div class="monthTitle" id="monthTitle">January</div>
          <div class="yearLine" id="yearLine">2026</div>
        </div>
        <div class="nav" aria-label="month navigation">
          <button class="btn" id="prevBtn" aria-label="Previous month">‹</button>
          <button class="btn" id="todayBtn" aria-label="Go to today">•</button>
          <button class="btn" id="nextBtn" aria-label="Next month">›</button>
        </div>
      </div>

      <div class="divider"></div>

      <div class="dow" aria-hidden="true">
        <div style="text-align:center;">S</div>
        <div style="text-align:center;">M</div>
        <div style="text-align:center;">T</div>
        <div style="text-align:center;">W</div>
        <div style="text-align:center;">T</div>
        <div style="text-align:center;">F</div>
        <div style="text-align:center;">S</div>
      </div>

      <div class="grid" id="grid"></div>

      <div class="footerNote" id="footerNote"></div>
    </div>
  </div>

  <script>
    const monthTitleEl = document.getElementById("monthTitle");
    const yearLineEl   = document.getElementById("yearLine");
    const gridEl       = document.getElementById("grid");
    const footerNoteEl = document.getElementById("footerNote");

    const prevBtn  = document.getElementById("prevBtn");
    const nextBtn  = document.getElementById("nextBtn");
    const todayBtn = document.getElementById("todayBtn");

    const monthNames = [
      "January","February","March","April","May","June",
      "July","August","September","October","November","December"
    ];

    // 오늘(실제 날짜) 기준
    const realToday = new Date();
    const realY = realToday.getFullYear();
    const realM = realToday.getMonth();
    const realD = realToday.getDate();

    // 현재 표시 중인 달 (초기값 = 이번 달)
    let viewY = realY;
    let viewM = realM;

    function pad2(n){ return String(n).padStart(2, "0"); }

    function render(){
      gridEl.innerHTML = "";

      // 헤더
      monthTitleEl.textContent = monthNames[viewM];
      yearLineEl.textContent = String(viewY);

      // 이번 달 1일의 요일 (0=Sun)
      const firstDay = new Date(viewY, viewM, 1);
      const startDow = firstDay.getDay();

      // 이번 달 일 수
      const daysInMonth = new Date(viewY, viewM + 1, 0).getDate();

      // 이전 달 일 수
      const prevDays = new Date(viewY, viewM, 0).getDate();

      // 캘린더는 6주(42칸)로 고정 -> 노션에서 항상 안정적으로 보임
      const totalCells = 42;

      for(let i=0; i<totalCells; i++){
        const cell = document.createElement("div");
        cell.className = "cell";

        let dayNum, isMuted = false, cellY=viewY, cellM=viewM;

        if(i < startDow){
          // 이전 달
          dayNum = prevDays - (startDow - 1 - i);
          isMuted = true;
          cellM = viewM - 1;
          if(cellM < 0){ cellM = 11; cellY = viewY - 1; }
        } else if(i >= startDow + daysInMonth){
          // 다음 달
          dayNum = i - (startDow + daysInMonth) + 1;
          isMuted = true;
          cellM = viewM + 1;
          if(cellM > 11){ cellM = 0; cellY = viewY + 1; }
        } else {
          // 이번 달
          dayNum = i - startDow + 1;
        }

        if(isMuted) cell.classList.add("muted");

        // 오늘 강조 (표시 달이 이번 달일 때만)
        const isToday = (cellY === realY && cellM === realM && dayNum === realD && !isMuted);
        if(isToday) cell.classList.add("today");

        cell.textContent = dayNum;
        gridEl.appendChild(cell);
      }

      // 하단 날짜 텍스트(감성 + 실용)
      const displayed = `${viewY}-${pad2(viewM+1)}`;
      const todayStr  = `${realY}-${pad2(realM+1)}-${pad2(realD)}`;
      footerNoteEl.textContent = `Today: ${todayStr}  ·  View: ${displayed}`;
    }

    function moveMonth(delta){
      viewM += delta;
      if(viewM < 0){ viewM = 11; viewY -= 1; }
      if(viewM > 11){ viewM = 0; viewY += 1; }
      render();
    }

    prevBtn.addEventListener("click", () => moveMonth(-1));
    nextBtn.addEventListener("click", () => moveMonth(1));
    todayBtn.addEventListener("click", () => {
      viewY = realY; viewM = realM;
      render();
    });

    render();
  </script>
</body>
</html>
