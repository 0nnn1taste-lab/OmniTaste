<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Scrap Archive Widget</title>
  <style>
    body {
      margin: 0;
      background: transparent;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }

    .widget {
      width: 320px;
      padding: 18px 20px;
      background: #e7f2ee;
      border-radius: 16px;
      box-sizing: border-box;
    }

    .text {
      font-size: 15px;
      color: #1f3f3a;
      line-height: 1.5;
      letter-spacing: -0.01em;
    }

    .count {
      font-weight: 600;
    }
  </style>
</head>
<body>
  <div class="widget">
    <div class="text" id="text">
      불러오는 중…
    </div>
  </div>

  <script>
    const REFRESH_INTERVAL = 30000; // 30초 자동 갱신

    function updateText() {
      fetch("/api/scrap-count")
        .then(res => res.json())
        .then(data => {
          document.getElementById("text").innerHTML =
            `총 <span class="count">${data.total}개</span>가 스크랩 되었습니다.`;
        })
        .catch(() => {
          document.getElementById("text").textContent =
            "스크랩 정보를 불러올 수 없습니다.";
        });
    }

    updateText(); // 최초 로드
    setInterval(updateText, REFRESH_INTERVAL); // 자동 반영
  </script>
</body>
</html>
